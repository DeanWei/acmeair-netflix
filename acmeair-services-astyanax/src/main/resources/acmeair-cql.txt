DROP KEYSPACE acmeair;

CREATE KEYSPACE acmeair 
  WITH REPLICATION = {'class' : 'SimpleStrategy',
  'replication_factor': 3};

USE acmeair;

CREATE TABLE customer (
  username text PRIMARY KEY,
  password text,
  customer_status text,
  total_miles int,
  miles_ytd int,
// TODO: look into column families and queries eventually
  addr_street1 text,
  addr_street2 text,
  addr_city text,
  addr_state_province text,
  addr_country text,
  addr_postal_code text,
// TODO: COMPACT STORAGE doesn't work with collection types
//  phone_numbers map<text, text>
  phone_number text,
  phone_number_type text
) WITH COMPACT STORAGE;

CREATE TABLE airport_code_mapping (
  airport_code text PRIMARY KEY,
  airport_name text,
) WITH COMPACT STORAGE;

CREATE TABLE flight_segment (
  flight_segment_id text PRIMARY KEY,
  origin_port text,
  dest_port text,
  miles int
) WITH COMPACT STORAGE;

CREATE TABLE flight (
  flight_id text,
  flight_segment_id text,
  scheduled_departure_time timestamp,
  scheduled_arrival_time timestamp,
// TODO:  why doesn't putColumn support BigDecimal
  first_class_base_cost float,
// TODO:  why doesn't putColumn support BigDecimal
  economy_class_base_cost float,
  num_first_class_seats int,
  num_economy_class_seats int,
  airplane_type_id text,
// TODO: COMPACT STORAGE doesn't allow clustering columns and originally
// FlightPK = flight_id + flight_segment_id
  PRIMARY KEY (flight_id)
) WITH COMPACT STORAGE;

CREATE TABLE customer_session (
  session_id text PRIMARY KEY,
  customer_id text,
  last_accessed_time timestamp,
  timeout_time timestamp
) WITH COMPACT STORAGE;